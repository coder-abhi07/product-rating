<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ ingredient.name }} Details</title>
</head>
<body>
    <h1>{{ ingredient.name }}</h1>
    <p><strong>Harmful:</strong> {{ ingredient.harmful }}</p>

    <h2>Reviews</h2>
    <ul>
        {% for review in reviews %}
            <li>
                <p><strong>{{ review.user.username }}</strong> (Rating: {{ review.rating }})</p>
                <p>{{ review.review_text }}</p>
                <p><small>Posted on {{ review.created_at }}</small></p>
            </li>
        {% empty %}
            <p>No reviews yet.</p>
        {% endfor %}
    </ul>

    <h2>Submit a Review</h2>
    <form action="{% url 'submit_review' pk=ingredient.pk %}" method="post">
        {% csrf_token %}
        <label for="rating">Rating (1-5):</label>
        <input type="number" id="rating" name="rating" min="1" max="5" required>

        <label for="review_text">Review:</label>
        <textarea id="review_text" name="review_text" rows="4" required></textarea>

        <button type="submit">Submit Review</button>
    </form>

    <a href="{% url 'ingredient_list' %}">Back to Ingredients List</a>


    {% if messages %}
        <script>
            {% for message in messages %}
                alert("{{ message }}");
            {% endfor %}
        </script>
    {% endif %}
    
</body>
</html>
